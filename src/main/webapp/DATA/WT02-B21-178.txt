
<DOC>
<DOCNO>WT02-B21-178</DOCNO>
<DOCOLDNO>IA052-000883-B029-225</DOCOLDNO>
<DOCHDR>
http://sparc1k.images.alaska.edu:80/interfer/refine.html 137.229.31.144 19970210141202 text/html 8525
HTTP/1.0 200 OK
Date: Monday, 10-Feb-97 14:12:14 GMT
Server: NCSA/1.3
MIME-version: 1.0
Content-type: text/html
Last-modified: Friday, 31-Jan-97 00:38:11 GMT
Content-length: 8345
</DOCHDR>
<!DOCTYPE HTML PUBLIC "-//IETF/DTD HTML 2.0//EN">
<HTML> 
<HEAD>
<TITLE>Interferometry at ASF/STEP: Refine_base</TITLE> 
</HEAD> <BODY BGCOLOR="#FFDEAD" TEXT="#00008F" LINK="#008B00" VLINK="#580000"
BACKGROUND="../res/backgrounds/asf_tile.gif"> 
<A HREF="http://www.asf.alaska.edu/">ASF Home Page</A> | 
<A HREF="http://www.images.alaska.edu/STEP.html">STEP</A> | 
<A HREF="http://www.images.alaska.edu/software.html">Software Info</A> | 
<A HREF="http://www.images.alaska.edu/download.html">Download Software</A> |
<A HREF="http://www.images.alaska.edu/interfer/">Interferometry</A> 
<H1 align=center>
Refine_base
</H1>

<DL>
<DT><H2>Introduction</H2></DT>
<DD>
Refine_base corrects a given baseline using tie-point locations and an unwrapped 
phase file. A tie-point file is an ASCII file containing elevations at specified 
pixel locations. As of now, this file is generated by hand using the multilooked 
amplitude image and an elevation map. A minimum of 4 tie points are required, 
but 8 to 15 tie points are recommended. An example tie point file follows.
<P>
<center>
<table cellpadding=4 borders=0>
<caption align=top>
Tie point file<br>
hand.tie<br>
</caption>
<tr align=center>
  <th>X (sample)</th>
  <th>Y (line)</th>
  <th>Elevation (m)</th>
</tr>
<tr align=center>
 <td>571</td><td>1501</td><td>387.195</td>
</tr>
<tr align=center>
  <td>571</td><td>1501</td><td>387.19</td>
</tr>
<tr align=center>
  <td>1378</td><td>649</td><td>326.21</td>
</tr>
<tr align=center>
  <td>595</td><td>556</td><td>306.71</td>
</tr>
<tr align=center>
  <td>760</td><td>1785</td><td>411.59</td>
</tr>
<tr align=center>
  <td>1667</td><td>1022</td><td>320.12</td>
</tr>
<tr align=center>
  <td>1007</td><td>1661</td><td>376.83</td>
</tr>
<tr align=center>
  <td>515</td><td>2404</td><td>539.63</td>
</tr>
<tr align=center>
  <td>315</td><td>2344</td><td>533.54</td>
</tr>
<tr align=center>
  <td>1134</td><td>1135</td><td>314.02</td>
</tr>
</table>
</center>
<P>
Refine_base uses these elevations and the corresponding unwrapped phase values 
to create a matrix A and a vector B which are related by the equation Ax=b. 
Refine_base then solves the equation for x which are our new baseline values.   
<P>
As a final step, refine_base will compare the vector b with the result of A 
times x. If life and our baselines are perfect the difference between these 
vectors would be zero. However, since we are trying to fit a baseline which we 
calculate to be a best fit among our tie points, there will be a difference 
between them. As a general rule, you want to minimize the difference between the 
two vectors. (<I>Caveat: Experience will show that the best calculated baseline 
will not always have a minimum difference between the vector b and the vector 
calculated by A times x.</I>) 
</DD>

<DT><H2>Example</H2></DT>
<DD>
For details on the command line syntax, please see the <a href=
"http://www.images.alaska.edu/cgi-bin/man-request.pl?asftool=refine_base&amp;sec
tion=1">man page</a>.
<P><PRE>
sparc1k [51]: refine_base -s -2.575006 uwp12 hand.tie asc1 base.0 base.1

###############################################
Running getphase:

Opening input files...

Cols =  2048
Rows =  2560
Seed Value = -2.5750
Total wall clock time = 0 seconds.


###############################################
Running genab:

Reading in data from ctrlpts.28066...
Reading in data from base.0...
Obtaining CEOS metadata...
k:  111.080, rs: 7.906118, m: 9, n: 4
ncols:   2048.0, xc   1024.0, nrows   2560.0, yc   1280.0
Est:  Bnc=  172.4012, dBn=    4.2763, Bpc=  -52.4283, dBp=   -2.4421
H: 7155344.402430,  re: 6360890.136719,  Rcenter: 859631.021184, theta_c 
0.368291 (21.101509 deg)
  near range look angle 19.834424 deg, inc angle 22.437846 deg
  center range look angle 21.101509 deg, inc angle 23.890304 deg
  far range look angle 22.264160 deg, inc angle 25.226508 deg
Error elevation = 200.000000, phase error criterion = 24.751136

Calculating terms for matrix and vector...

input uwp -88.6695 + re-ramp term 12065.1955 = revised uwp 11976.5260
A-coeffs:     1.87134     0.16155  -222.15175  -220.99216; omega_y = -0.211926

input uwp 221.5569 + re-ramp term 11241.3256 = revised uwp 11462.8825
A-coeffs:    -1.81555     0.44750  -222.15221   630.97893; omega_y = -0.211926

input uwp 244.8186 + re-ramp term 11841.9596 = revised uwp 12086.7781
A-coeffs:     1.80996    -0.51188  -222.15226   723.97597; omega_y = -0.211926

input uwp -187.6093 + re-ramp term 11971.6106 = revised uwp 11784.0013
A-coeffs:     0.96310     0.18999  -222.15754  -504.99525; omega_y = -0.211926

input uwp 97.2447 + re-ramp term 11097.5095 = revised uwp 11194.7542
A-coeffs:    -3.09460     0.31188  -222.13808   257.97497; omega_y = -0.211926

input uwp -138.7816 + re-ramp term 11746.0100 = revised uwp 11607.2284
A-coeffs:    -0.16193    -0.02410  -222.15957  -380.99990; omega_y = -0.211926

input uwp -420.4421 + re-ramp term 12306.3793 = revised uwp 11885.9372
A-coeffs:     2.03806     0.89484  -222.15028  -1123.95270; omega_y = -0.211926

input uwp -401.4682 + re-ramp term 12461.0490 = revised uwp 12059.5808
A-coeffs:     3.00350     1.24833  -222.13933  -1063.90276; omega_y = -0.211926

input uwp 51.3593 + re-ramp term 11533.8730 = revised uwp 11585.2323
A-coeffs:    -0.70417     0.03988  -222.15851   144.99927; omega_y = -0.211926


Matrix calculated....

rms phase error = 222.003524, or ~1793.885561 m

Writing output files...
Total wall clock time = 0 seconds.


###############################################
Running bp & test_base:

Beginning singular value decomposition of matrix A...
Lyo2k = 11.523246

SVD of A is ok


vector printout: b check, compare with ...

11971.2598 
11459.0752 
12083.5781 
11779.4854 
11190.6328 
11603.8564 
11882.6582 
12055.7939 
11581.8828 


vector printout: b

11972.6729 
11459.0830 
12082.9951 
11780.1240 
11190.9238 
11603.3574 
11882.0166 
12055.6689 
11581.3994 


vector printout: x0

170.0199 
  4.4630 
-52.5847 
  0.1331 


  rms of b-reconstructed and b = 0.644579
Lyo2k = 11.523246
new Baseline:  Bn = 170.019882, dBn = 4.462993, Bp = -52.584679, dBp = 1.533228
Total wall clock time = 0 seconds.

rms diff(b, A*x) = 0.644864, avg diff(b, A*x) = 0.002077

End refine_base.
Total Time = 1 seconds

</PRE>
<HR align=center WIDTH=50%>
<P>
The resulting baseline file looks like the following.
<P>

<center>
<table borders=0>
<caption align=top>
New baseline<br>base.1
</caption>
<td>
<PRE>
   170.0198822       4.4629927     -52.5846786       1.5332280
</PRE>
</td>
</table>
</center>
</DD>

<DT><H2>Description</H2></DT>
<DD>
Refine_base uses the tie-point file hand.tie and the unwrapped phase file, 
uwp12.phase, to generate new baseline parameters. The new baseline is put in the 
file called base.1. For these examples, I need to specify the seed phase that 
was used for unwrapping. The refine_base program will not accept a tie-point 
with the same phase as the seed-phase. Since refine_base will default to a seed 
phase of 0.0, I need to specify the seed phase used by <a 
href="escher.html">escher</a>. If you let escher use the phase at the seed 
location, do not despair. Escher will display the value of the seed-phase in its 
output.
</DD>

<DT><H2>Next Step</H2></DT>
<DD>
Once a new baseline has been generated, you will need to perform another 
iteration of <a href="deramp.html">deramp</a>, <a 
href="ml.html">multilooking</a>, and <a href="escher.html">unwrapping</a>. If 
the new baseline is not correct, you will even need to refine the baseline 
again. Please see the page <a href="iter.html">Iterations</a> for more 
information.
</DD>
</DL>
<P>
<a href="escher.html">
<img src="../res/buttons/leftarrow.gif" alt="[Go Back]" WIDTH=29 HEIGHT=30>
</a>
<a href="iter.html">
<img src="../res/buttons/rightarrow.gif" alt="[Go Ahead]" WIDTH=29 HEIGHT=30>
</a>
<P>
<CENTER>
<IMG ALT="[---------]" SRC="../res/lines/ice_blue_line.gif" WIDTH=85%>
</CENTER>
<H4> 
Created By: <a href="mailto:mshindle@images.alaska.edu">Michael Shindle</a><br>
Last Updated: January 23,1997<BR> 
Last Updated By: <A 
HREF="http://www.images.alaska.edu/users/mike/mike.html">Michael 
Shindle</A><BR> If you have any questions, please feel free to email <A
HREF="mailto:mshindle@images.alaska.edu">me</A> or send us a <A
HREF="http://www.images.alaska.edu/comments.html">comment</A>. 
<H4> 
</BODY>
</HTML> 

</DOC>